# ============================================================
# Baseline Training Config (Apples-to-Apples with QSFM)
# LTX-Video 2B + LoRA  |  Single-shot AR Base
# ============================================================

# â”€â”€ ëª¨ë¸ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
model:
  model_source: "LTXV_2B_0.9.6_DEV"
  training_mode: "lora"
  load_checkpoint: null

# â”€â”€ LoRA ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
lora:
  rank: 32
  alpha: 32
  dropout: 0.0
  target_modules:
    - "to_k"
    - "to_q"
    - "to_v"
    - "to_out.0"

# â”€â”€ ì»¨ë””ì…”ë‹ ì„¤ì • (ì¼ë°˜ ëª¨ë“œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
conditioning:
  mode: "none"
  first_frame_conditioning_p: 0.1

# â”€â”€ ìµœì í™” ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
optimization:
  learning_rate: 2e-4
  steps: 2000            # QSFMê³¼ ë™ì¼í•˜ê²Œ 2000 ìŠ¤í…ìœ¼ë¡œ ë§ì¶¤
  batch_size: 1          # AR ë² ì´ìŠ¤ë¼ì¸ì€ ë³´í†µ 1ìƒ·ì”© í•™ìŠµ
  gradient_accumulation_steps: 1
  max_grad_norm: 1.0
  optimizer_type: "adamw"
  scheduler_type: "constant" # QSFMê³¼ ë™ì¼í•˜ê²Œ ë§ì¶¤
  scheduler_params: {}
  enable_gradient_checkpointing: false

# â”€â”€ ê°€ì† ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
acceleration:
  mixed_precision_mode: "bf16"
  quantization: null
  load_text_encoder_in_8bit: true
  compile_with_inductor: false
  compilation_mode: "reduce-overhead"

# â”€â”€ ë°ì´í„° ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
data:
  preprocessed_data_root: "/home/dongwoo43/qfm/qsfm_data" # ğŸš¨ ì‹¤ì œ ë°ì´í„° ê²½ë¡œë¡œ ìˆ˜ì • ì™„ë£Œ
  num_dataloader_workers: 0

# â”€â”€ ê²€ì¦ ì„¤ì • (QSFMê³¼ ì™„ë²½íˆ ë™ì¼í•œ í”„ë¡¬í”„íŠ¸ & í•´ìƒë„) â”€â”€â”€â”€â”€â”€
validation:
  prompts:
    - "A cartoon rabbit waddles through an open meadow as small animated birds circle overhead."
    - "A large fluffy rabbit sits near a pond surrounded by trees in an animated nature scene."
    - "Three squirrels fly through the air over a forest as a giant rabbit watches with curiosity."
    - "An animated rabbit chases a small rodent through tall grass in a colorful cartoon forest."
  negative_prompt: "worst quality, inconsistent motion, blurry, jittery, distorted"
  images: null
  video_dims: [512, 320, 97]   # ğŸš¨ QSFM ì „ì²˜ë¦¬ í•´ìƒë„ì™€ ë™ì¼í•˜ê²Œ ë§ì¶¤
  seed: 42
  inference_steps: 30
  interval: 200
  videos_per_prompt: 1
  guidance_scale: 3.5

# â”€â”€ ì²´í¬í¬ì¸íŠ¸ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
checkpoints:
  interval: 200
  keep_last_n: 3

# â”€â”€ Flow Matching ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
flow_matching:
  timestep_sampling_mode: "uniform" # QSFMê³¼ ë™ì¼í•˜ê²Œ ë§ì¶¤
  timestep_sampling_params: {}

# â”€â”€ Hub / W&B ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
hub:
  push_to_hub: false
  hub_model_id: null

wandb:
  enabled: false 
  project: "ltxv-trainer"
  entity: null 
  tags: ["baseline", "ltxv", "apples-to-apples"]
  log_validation_videos: true

# â”€â”€ ê³µí†µ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
seed: 42
output_dir: "outputs/ltxv_lora"